{% import 'macro_functions.html.twig' as mf %}
{% extends 'layout_default.html.twig' %}
{% block meta_title %}
    {{ 'Proxmox Configuration Templates' | trans }}
{% endblock %}
{% set active_menu = 'proxmox' %}

{% block content %}
    <div class="card">
        <div class="card-body">
            <form method="post" action="admin/serviceproxmox/vm_template_update" class="api-form" data-api-redirect="{{ 'serviceproxmox/templates'|alink }}">
                <input type="hidden" name="CSRFToken" value="{{ CSRFToken }}" />
                <input type="hidden" name="id" value="{{ vm_config_template.id }}" />
                <div class="mb-3 row">
                    <label class="form-label col-3 col-form-label">
                        {{ 'Name' | trans }}:    
                    </label>
                    <div class="col">
                        <input class="form-control" type="text" name="name" value="{{vm_config_template.name}}" required placeholder="{{ 'Unique name to identify this template' | trans }}">
                    </div>
                </div>
                <div class="mb-3 row">
                    <label class="form-label col-3 col-form-label">
                        {{ 'Description' | trans }}:
                    </label>
                    <div class="col">
                        <input class="form-control" type="text-area" name="description" value="{{vm_config_template.description}}" required placeholder="{{ 'Description' | trans }}">
                    </div>
                </div>
                <div class="mb-3 row">
                    <label class="form-label col-3 col-form-label">
                        {{ 'CPU Cores' | trans }}:                                                                    
                    </label>
                    <div class="col-md-5">
                            <input class="form-range" type="range" name="cpu_cores" value="{{vm_config_template.cpu_cores}}" min="1" max="128" step="1" oninput="cpuOutput.value = this.value+' Core(s)';">
                    </div>
                    <div class="col-md-2">
                        <output name="cpuOutput" for="cpu_cores">
                            1 Core(s)
                        </output>
                    </div>
                </div>
                <div class="mb-3 row">
                    <label class="form-label col-3 col-form-label">
                        {{ 'Memory' | trans }}:                                                                    
                    </label>
                    <div class="col-md-5">
                            <input class="form-range" type="range" name="vmmemory" value="{{vm_config_template.vmmemory}}" min="1" max="128" step="1" oninput="vmmemoryOutput.value = this.value+' GB';">
                    </div>
                    <div class="col-md-2">
                        <output name="vmmemoryOutput" for="vmmemory">
                            1 GB
                        </output>
                    </div>
                </div>
                <div class="mb-3 row">
                    <label class="form-label col-3 col-form-label">
                        {{ 'Ballooning' | trans }}:                                                                            
                    </label>
                    <div class="col">
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" id="radioBalloonYes" type="radio" name="balloon" value="1" {% if vm_config_template.balloon == '1' %} checked {% endif %}>                        
                        <label class="form-check-label" for="radioBalloonYes">
                            {{ 'Yes' | trans }}
                        </label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" id="radioBalloonNo" type="radio" name="balloon" value="0"{% if vm_config_template.balloon == '0' %} checked {% endif %}> 
                        <label class="form-check-label" for="radioBalloonNo">
                            {{ 'No' | trans }}
                        </label>
                    </div>
                </div>
                </div>
                <div class="mb-3 row">
                    <label class="form-label col-3 col-form-label">
                        {{ 'Ballooing Memory Size' | trans }}:                                                                                    
                    </label>
                    <!-- disable this if ballooning is not enabled -->
                
                    <div class="col-md-5">
                            <input class="form-range" type="range" name="balloon_size" value="{{vm_config_template.balloon_size}}" min="1" max="128" step="1" oninput="memoryOutput.value = this.value+' GB';">
                    </div>
                    <div class="col-md-2">
                        <output name="memoryOutput" for="balloon_size">
                            1 GB
                        </output>
                    </div>
                </div>
                <div class="mb-3 row">
                    <label class="form-label col-3 col-form-label">
                        {{ 'OS' | trans }}:
                    </label>
                    <!-- get os_list from the api -->
                    {% set os_list = admin.serviceproxmox_os_get_list() %}
                    <!-- dropdown menu with all available OS from constants provided by the module -->
                    <div class="col">
                        <select class="form-select" name="os">
                            {% for os in os_list %}
                            <option value="{{ os }}" {% if vm_config_template.os == os %} selected {% endif %}>{{ os }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
                <div class="mb-3 row">
                    <label class="form-label col-3 col-form-label">
                        {{ 'Bios Type' | trans }}:
                    </label>
                    <!-- get bios_list from the api -->
                    {% set bios_list = admin.serviceproxmox_bios_get_list() %}
                    <!-- dropdown menu with all available BIOS from constants provided by the module -->
                    <div class="col">
                        <select class="form-select" name="bios">
                            {% for bios in bios_list %}
                            <option value="{{ bios }}" {% if vm_config_template.bios == bios %} selected {% endif %}>{{ bios }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
                <div class="mb-3 row">
                    <label class="form-label col-3 col-form-label">
                        {{ 'Start on boot' | trans }}:
                    </label>
                    <div class="col">
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" id="radioOnbootYes" type="radio" name="onboot" value="1" {% if vm_config_template.onboot == '1' %} checked {% endif %}>
                        <label class="form-check-label" for="radioOnbootYes">
                            {{ 'Yes' | trans }}
                        </label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" id="radioOnbootNo" type="radio" name="onboot" value="0" {% if vm_config_template.onboot == '0' %} checked {% endif %}>
                        <label class="form-check-label" for="radioOnbootNo">
                            {{ 'No' | trans }}
                        </label>
                    </div>
                </div>

                </div>
                <div class="mb-3 row">
                    <label class="form-label col-3 col-form-label">
                        {{ 'Qemu Guest Agent' | trans }}:
                    </label>
                    <div class="col">
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" id="radioAgentYes" type="radio" name="agent" value="1" {% if vm_config_template.agent == '1' %} checked {% endif %}>
                            <label class="form-check-label" for="radioAgentYes">
                                {{ 'Enabled' | trans }}
                            </label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" id="radioAgentNo" type="radio" name="agent" value="0" {% if vm_config_template.agent == '0' %} checked {% endif %}>
                            <label class="form-check-label" for="radioAgentNo">
                                {{ 'Disabled' | trans }}
                            </label>
                        </div>
                    </div>
                </div>
                <input type="submit" value="{{ 'Update VM Template' | trans }}" class="btn btn-primary">
            </form>
        </div>
    </div>

{% endblock %}